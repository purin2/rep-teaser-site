<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>登録完了 - Rep</title>

  <!-- OGP for sharing -->
  <meta property="og:title" content="Rep - 経営者限定SNSに事前登録しました">
  <meta property="og:description" content="完全招待制・本人確認必須。経営者だけが集まるクローズドSNS。特別招待枠で事前登録受付中！">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://purin2.github.io/rep-teaser-site/">
  <meta property="og:image" content="https://purin2.github.io/rep-teaser-site/ogp-share.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Rep - 経営者限定SNSに事前登録しました">
  <meta name="twitter:description" content="完全招待制・本人確認必須。経営者だけが集まるクローズドSNS。">
  <meta name="twitter:image" content="https://purin2.github.io/rep-teaser-site/ogp-share.png">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --brand: #CCFF33;
      --bg: #000000;
      --text: #ffffff;
      --text-muted: rgba(255, 255, 255, 0.5);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans JP', sans-serif;
      font-weight: 500;
      background: var(--bg);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow-x: hidden;
    }

    /* Starfield Background */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
      background:
        radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,0.5) 0%, transparent 100%),
        radial-gradient(1px 1px at 40% 70%, rgba(255,255,255,0.4) 0%, transparent 100%),
        radial-gradient(1.5px 1.5px at 50% 20%, rgba(255,255,255,0.7) 0%, transparent 100%),
        radial-gradient(1px 1px at 60% 50%, rgba(255,255,255,0.3) 0%, transparent 100%),
        radial-gradient(1px 1px at 70% 80%, rgba(255,255,255,0.5) 0%, transparent 100%),
        radial-gradient(1px 1px at 80% 10%, rgba(255,255,255,0.4) 0%, transparent 100%),
        radial-gradient(1px 1px at 10% 60%, rgba(255,255,255,0.5) 0%, transparent 100%),
        radial-gradient(1px 1px at 30% 90%, rgba(255,255,255,0.4) 0%, transparent 100%),
        radial-gradient(1.5px 1.5px at 90% 40%, rgba(255,255,255,0.6) 0%, transparent 100%),
        radial-gradient(1px 1px at 15% 85%, rgba(255,255,255,0.3) 0%, transparent 100%),
        radial-gradient(2px 2px at 25% 15%, rgba(255,255,255,0.8) 0%, transparent 100%),
        radial-gradient(1.5px 1.5px at 75% 65%, rgba(255,255,255,0.6) 0%, transparent 100%);
    }

    /* Ambient glow */
    .glow-bg {
      position: fixed;
      top: 30%;
      left: 50%;
      transform: translateX(-50%);
      width: 80vw;
      height: 50vh;
      background: radial-gradient(ellipse at center, rgba(204, 255, 51, 0.08) 0%, transparent 60%);
      pointer-events: none;
      z-index: 0;
    }

    .container {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      padding: 40px 24px;
      max-width: 600px;
      width: 100%;
    }

    /* Logo */
    .logo {
      margin-bottom: 48px;
      opacity: 0;
      animation: fadeUp 0.8s ease-out 0.2s forwards;
    }

    .logo svg {
      height: clamp(48px, 8vw, 64px);
      width: auto;
    }

    /* Success Icon */
    .success-icon {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: var(--brand);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 32px;
      box-shadow: 0 0 40px rgba(204, 255, 51, 0.4), 0 0 80px rgba(204, 255, 51, 0.2);
      opacity: 0;
      animation: scaleIn 0.6s ease-out 0.4s forwards;
    }

    .success-icon svg {
      width: 40px;
      height: 40px;
      stroke: #000;
      stroke-width: 3;
      fill: none;
    }

    /* Title */
    .title {
      font-size: clamp(24px, 4vw, 32px);
      font-weight: 700;
      margin-bottom: 20px;
      letter-spacing: -0.01em;
      opacity: 0;
      animation: fadeUp 0.8s ease-out 0.6s forwards;
    }

    /* Message */
    .message {
      font-size: clamp(14px, 2vw, 16px);
      font-weight: 400;
      color: rgba(255, 255, 255, 0.75);
      line-height: 1.9;
      margin-bottom: 48px;
      letter-spacing: 0.02em;
      opacity: 0;
      animation: fadeUp 0.8s ease-out 0.8s forwards;
    }

    /* Share Section */
    .share-section {
      width: 100%;
      opacity: 0;
      animation: fadeUp 0.8s ease-out 1s forwards;
    }

    .share-title {
      font-size: clamp(13px, 1.5vw, 15px);
      font-weight: 600;
      color: rgba(255, 255, 255, 0.6);
      letter-spacing: 0.1em;
      margin-bottom: 20px;
      text-transform: uppercase;
    }

    .share-buttons {
      display: flex;
      justify-content: center;
      gap: 16px;
      flex-wrap: wrap;
    }

    .share-button {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 14px 28px;
      border-radius: 50px;
      font-size: 14px;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s ease;
      cursor: pointer;
      border: none;
      font-family: inherit;
    }

    .share-button svg {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
    }

    /* X (Twitter) */
    .share-x {
      background: #000;
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .share-x:hover {
      background: #1a1a1a;
      border-color: rgba(255, 255, 255, 0.4);
      transform: translateY(-2px);
    }

    /* LINE */
    .share-line {
      background: #06C755;
      color: #fff;
    }

    .share-line:hover {
      background: #05b34c;
      transform: translateY(-2px);
    }

    /* Facebook */
    .share-facebook {
      background: #1877F2;
      color: #fff;
    }

    .share-facebook:hover {
      background: #166fe5;
      transform: translateY(-2px);
    }

    /* Copy Link */
    .share-copy {
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .share-copy:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: var(--brand);
      transform: translateY(-2px);
    }

    .share-copy.copied {
      background: var(--brand);
      color: #000;
      border-color: var(--brand);
    }

    /* Back link */
    .back-link {
      margin-top: 48px;
      font-size: 13px;
      color: rgba(255, 255, 255, 0.5);
      text-decoration: none;
      transition: color 0.3s;
      opacity: 0;
      animation: fadeUp 0.8s ease-out 1.2s forwards;
    }

    .back-link:hover {
      color: var(--brand);
    }

    /* Remaining Counter */
    .remaining-counter {
      margin-top: 32px;
      padding: 16px 32px;
      background: rgba(204, 255, 51, 0.1);
      border: 1px solid rgba(204, 255, 51, 0.3);
      border-radius: 12px;
      opacity: 0;
      animation: fadeUp 0.8s ease-out 1.1s forwards;
    }

    .remaining-label {
      font-size: 12px;
      font-weight: 500;
      color: rgba(255, 255, 255, 0.6);
      letter-spacing: 0.05em;
      margin-bottom: 4px;
    }

    .remaining-number {
      font-size: 28px;
      font-weight: 700;
      color: var(--brand);
      letter-spacing: -0.02em;
    }

    .remaining-suffix {
      font-size: 14px;
      font-weight: 500;
      color: rgba(255, 255, 255, 0.7);
      margin-left: 4px;
    }

    /* Animations */
    @keyframes fadeUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes scaleIn {
      from {
        opacity: 0;
        transform: scale(0.5);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    /* Mobile */
    @media (max-width: 480px) {
      .share-buttons {
        flex-direction: column;
        gap: 12px;
      }

      .share-button {
        width: 100%;
        justify-content: center;
      }
    }
  </style>

  <!-- Supabase JS Client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <div class="particles"></div>
  <div class="glow-bg"></div>

  <div class="container">
    <!-- Logo -->
    <div class="logo">
      <svg viewBox="80 40 420 150" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M173.527 125.333C192.315 125.333 207.547 110.189 207.547 91.5104C207.547 73.3694 193.179 58.5601 175.137 57.7271C178.29 57.0122 181.575 56.6318 184.946 56.6318C209.11 56.6318 228.703 76.1109 228.703 100.135C228.703 124.159 209.11 143.638 184.946 143.638C161.461 143.638 142.297 125.248 141.235 102.155C145.721 115.613 158.486 125.327 173.527 125.327V125.333Z" fill="#FFF442"/>
        <path d="M184.966 154.493C154.772 154.493 130.298 130.16 130.298 100.141C130.298 70.1228 153.387 47.1874 182.38 45.8429C177.314 44.6886 172.036 44.0786 166.62 44.0786C127.778 44.0786 96.291 75.3828 96.291 114C96.291 152.617 127.778 183.914 166.614 183.914C205.449 183.914 235.148 154.355 236.863 117.253C229.653 138.883 209.143 154.493 184.959 154.493H184.966Z" fill="#CCFF33"/>
        <path d="M276.135 69.2114H316.95C328.303 69.2114 337.103 72.5301 342.968 78.6296C347.942 83.8043 350.62 91.104 350.62 99.8597V100.122C350.62 115.115 342.842 124.533 331.489 128.914L353.298 162.088H330.341L311.21 132.364H295.78V162.088H276.141V69.2114H276.135ZM315.67 114.321C325.235 114.321 330.717 109.016 330.717 101.185V100.922C330.717 92.1665 324.853 87.6542 315.287 87.6542H295.774V114.321H315.67Z" fill="white"/>
        <path d="M358.503 129.603V129.373C358.503 111.567 370.701 96.9019 388.156 96.9019C408.184 96.9019 417.36 113.082 417.36 130.77C417.36 132.167 417.248 133.794 417.136 135.427H375.397C377.073 143.455 382.45 147.646 390.056 147.646C395.762 147.646 399.905 145.783 404.602 141.245L414.339 150.204C408.745 157.418 400.69 161.845 389.831 161.845C371.815 161.845 358.503 148.695 358.503 129.603ZM400.802 124.363C399.793 116.446 395.32 111.095 388.156 111.095C380.992 111.095 376.519 116.335 375.173 124.363H400.795H400.802Z" fill="white"/>
        <path d="M430 98.0624H447.007V107.021C451.15 101.204 456.856 96.895 465.696 96.895C479.681 96.895 493 108.3 493 129.137V129.367C493 150.203 479.905 161.609 465.696 161.609C456.632 161.609 451.037 157.3 447.007 152.295V179.068H430V98.0624ZM475.987 129.367V129.137C475.987 118.781 469.271 111.914 461.328 111.914C453.386 111.914 446.782 118.781 446.782 129.137V129.367C446.782 139.723 453.386 146.589 461.328 146.589C469.271 146.589 475.987 139.841 475.987 129.367Z" fill="white"/>
      </svg>
    </div>

    <!-- Success Icon -->
    <div class="success-icon">
      <svg viewBox="0 0 24 24">
        <polyline points="20 6 9 17 4 12"></polyline>
      </svg>
    </div>

    <!-- Title -->
    <h1 class="title">登録ありがとうございます</h1>

    <!-- Message -->
    <p class="message">
      順番にメールで運営より招待状を<br>
      送付させていただきますのでお待ちください。
    </p>

    <!-- Remaining Counter -->
    <div class="remaining-counter">
      <p class="remaining-label">特別招待枠 残り</p>
      <span class="remaining-number" id="remainingCount">---</span>
      <span class="remaining-suffix">名様</span>
    </div>

    <!-- Share Section -->
    <div class="share-section">
      <p class="share-title">友達にもシェアする</p>
      <div class="share-buttons">
        <!-- X (Twitter) -->
        <a href="#" class="share-button share-x" id="shareX">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
          </svg>
          X でシェア
        </a>

        <!-- LINE -->
        <a href="#" class="share-button share-line" id="shareLine">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.349 0 .63.285.63.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"/>
          </svg>
          LINE
        </a>

        <!-- Facebook -->
        <a href="#" class="share-button share-facebook" id="shareFacebook">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
          </svg>
          Facebook
        </a>

        <!-- Copy Link -->
        <button class="share-button share-copy" id="shareCopy">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
          </svg>
          <span id="copyText">リンクをコピー</span>
        </button>
      </div>
    </div>

    <!-- Back Link -->
    <a href="./" class="back-link">トップページに戻る</a>
  </div>

  <script src="js/supabase-client.js"></script>
  <script>
    // Share URLs
    const siteUrl = 'https://purin2.github.io/rep-teaser-site/';
    let remainingCount = 0;

    // Load remaining count
    async function loadRemainingCount() {
      try {
        const client = window.getSupabaseClient();
        if (client) {
          const { data } = await client
            .from('settings')
            .select('value')
            .eq('key', 'remaining_count')
            .single();

          if (data) {
            remainingCount = parseInt(data.value, 10) || 0;
            document.getElementById('remainingCount').textContent = remainingCount.toLocaleString();
          }
        }
      } catch (e) {
        console.warn('Could not load remaining count');
        document.getElementById('remainingCount').textContent = '---';
      }
    }

    // Generate share text
    function getShareText() {
      const countText = remainingCount > 0 ? `特別招待枠 残り${remainingCount}名！` : '特別招待枠で受付中！';
      return `【Rep】経営者限定SNSの事前登録をしました！\n${countText}\n完全招待制・本人確認必須。経営者だけが集まるクローズドSNS。\n`;
    }

    // X (Twitter) Share
    document.getElementById('shareX').addEventListener('click', (e) => {
      e.preventDefault();
      const text = encodeURIComponent(getShareText());
      const url = encodeURIComponent(siteUrl);
      window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank', 'width=550,height=420');
    });

    // LINE Share
    document.getElementById('shareLine').addEventListener('click', (e) => {
      e.preventDefault();
      const text = encodeURIComponent(getShareText() + siteUrl);
      window.open(`https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(siteUrl)}&text=${text}`, '_blank');
    });

    // Facebook Share
    document.getElementById('shareFacebook').addEventListener('click', (e) => {
      e.preventDefault();
      const url = encodeURIComponent(siteUrl);
      window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank', 'width=550,height=420');
    });

    // Copy Link
    document.getElementById('shareCopy').addEventListener('click', async () => {
      const btn = document.getElementById('shareCopy');
      const textEl = document.getElementById('copyText');

      try {
        await navigator.clipboard.writeText(siteUrl);
        btn.classList.add('copied');
        textEl.textContent = 'コピーしました！';

        setTimeout(() => {
          btn.classList.remove('copied');
          textEl.textContent = 'リンクをコピー';
        }, 2000);
      } catch (e) {
        // Fallback
        const textarea = document.createElement('textarea');
        textarea.value = siteUrl;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);

        btn.classList.add('copied');
        textEl.textContent = 'コピーしました！';

        setTimeout(() => {
          btn.classList.remove('copied');
          textEl.textContent = 'リンクをコピー';
        }, 2000);
      }
    });

    // Initialize
    document.addEventListener('DOMContentLoaded', loadRemainingCount);
  </script>
</body>
</html>
